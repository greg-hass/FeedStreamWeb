(()=>{"use strict";self.addEventListener("push",i=>{if(i.data)try{let t=i.data.json(),e=t.title||"New Article",n={body:t.body||"You have a new article to read",icon:"/icon-192.png",badge:"/icon-192.png",tag:t.tag||"article-notification",data:{url:t.url||"/",articleId:t.articleId}};i.waitUntil(self.registration.showNotification(e,n))}catch(i){console.error("Push notification error:",i)}}),self.addEventListener("notificationclick",i=>{i.notification.close();let t=i.notification.data?.url||"/";i.waitUntil(self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(i=>{for(let e of i)if(e.url.includes(self.location.origin)&&"focus"in e)return e.navigate(t),e.focus();if(self.clients.openWindow)return self.clients.openWindow(t)}))}),self.addEventListener("pushsubscriptionchange",()=>{console.log("Push subscription changed - may need to re-subscribe")})})();